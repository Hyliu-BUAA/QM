# 0. 环境变量设置 -- 可以添加到 `~/.bashrc` 中
```shell
export VASP_COMMAND=/home/pwmat/Interaction/2workdir/vasp_sub.sh
export VASP_SCRIPT=/home/pwmat/Interaction/2workdir/run_vasp.py

# RuntimeError: Looking for PP for potpaw_PBE/Na/POTCAR
# The pseudopotentials are expected to be in:
# LDA:  $VASP_PP_PATH/potpaw/
# PBE:  $VASP_PP_PATH/potpaw_PBE/
# PW91: $VASP_PP_PATH/potpaw_GGA/ 
export VASP_PP_PATH=/home/pwmat
```

# 1. 运行 vasp 的shell脚本 -- `vasp_sub.sh`
```shell
#!/bin/bash

module load intel/2016
module load vasp/5.4.4

mpirun -np 6 vasp_std | tee log
```


# 2. 运行vasp的shell脚本的Python脚本 -- `run_vasp.py`
```python 
import os 
exitcode = os.system('vasp_sub.sh')
```

# 3. 运行 vasp 的 ase 接口的主程序
## 3.1. `NaCl`
```python
from ase import Atoms, Atom
from ase.calculators.vasp import Vasp

a = [6.5, 6.5, 7.7]
d = 2.3608
AgCl = Atoms([Atom('Ag', [0, 0, 0], magmom=1.928),
              Atom('Cl', [0, 0, d], magmom=0.75)],
             cell=a)
AgCl.pbc = True

calc = Vasp(prec='Accurate',
            #xc='PBE',
            lreal=False,
            directory="./tmp")
AgCl.calc = calc

print(AgCl.get_magnetic_moment())
```

## 3.2. `Pt`
```python
from ase.calculators.vasp import Vasp
from ase.build import bulk


calc = Vasp(setups='recommended', directory="./tmp")  # 输出文件的路径
atoms = bulk('Pt', 'fcc', a=3.5, cubic=True)

atoms.calc = calc

print(atoms.get_potential_energy())
```